name = "moltbot-sandbox"
main = "src/index.ts"
compatibility_date = "2025-05-06"
compatibility_flags = ["nodejs_compat"]

[observability]
enabled = true

# Container configuration for the Moltbot sandbox
[[containers]]
class_name = "Sandbox"
image = "./Dockerfile"
instance_type = "standard-4"
max_instances = 1

[[durable_objects.bindings]]
class_name = "Sandbox"
name = "Sandbox"

[[migrations]]
new_sqlite_classes = ["Sandbox"]
tag = "v1"

# R2 bucket for persistent storage
[[r2_buckets]]
binding = "MOLTBOT_BUCKET"
bucket_name = "moltbot-data"

# Cron trigger to sync moltbot data to R2 every 5 minutes
[triggers]
crons = ["*/5 * * * *"]

# Browser Rendering binding for CDP shim
[browser]
binding = "BROWSER"
